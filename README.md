# Подготовка данных приложения HSE App X
## Содержание
1. [/logs](logs)\
1.1. [aggregator.py](logs/aggregator.py)\
Скрипт для агрегирования данных из `.csv` файлов в выбранной директории в единый `DataFrame` с обработанными и отсортированными по времени логами.\
1.2. [main.py](logs/main.py)\
Скрипт для парсинга логов приложения.\
В качестве параметров принимает название платформы (поддерживает парсинг логов ios/android) путь до входного файла с логами, путь до выходного файла, куда сохранятся данные в формате `.csv`.   
Формат собранных данных:

timestamp | url | status | elapsed | request | response | message 
--- | --- | --- | --- |--- |--- |--- 
Время события в формате UNIX Timestamp | Адрес запроса | Статус, полученный в результате выполнения http-запроса | Время (в секундах), за которое был выполнен запрос | Запрос полностью (curl с учетом всех хедеров, тела запроса и адреса) | Полное содержание ответа | Сообщение (для ошибочных сообщений, а также логов с информацией) 
     
2. [/gitlab-fetch](gitlab-fetch)\
Содержит скрипты для получения данных из репозитория проетка (использовалась библиотека GitLab4J), а также код для анонимизации этих данных и их записи в файлы формата `.csv`. \
2.1. [GetCommitsInfo.java](gitlab-fetch/GetCommitsInfo.java)\
Скрипт для получения коммитов на отдельно заданной ветке проекта. \
Формат данных:

created_at | id | title | description | author | parent_id 
--- | --- | --- | --- |--- |---  
Время события по МСК | id коммита (строка) | Название коммита | Доп. описание к коммиту | Автор коммита | id родительского коммита 

2.2. [GetFileDiffsAllBranches.java](gitlab-fetch/GetFileDiffsAllBranches.java)\
Скрипт для сбора данных о коммитах и относящихся к ним изменений файлов (сбор со всех веток проекта). \
Формат данных:

created_at | id | title | message | author | parent | branch | diffs
--- | --- | --- | --- |--- |--- | --- | ---
Время события по МСК | id коммита (строка) | Название коммита | Доп. описание к коммиту | Автор коммита | id родительского коммита | Имя ветки | Список всех изменений в виде строкового представления объектов из API


2.3. [GetJobsInfo.java](gitlab-fetch/GetJobsInfo.java)\
Скрипт для получения списка сборок проекта через CI.


2.4. [GetMergesInfo.java](gitlab-fetch/GetMergesInfo.java)\
Скрипт для получения данных о всех мердж-реквестах проекта (время создания, статус, время закрытия/мерджа, автор реквеста, список всех участников, оценки (upvotes/downvotes) и др.)
